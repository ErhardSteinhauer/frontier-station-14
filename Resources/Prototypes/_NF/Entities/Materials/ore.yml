
- type: entity
  parent: OreBase
  id: ScrapOre
  name: scrap chunks
  description: Various bits of previously used machinery. Needs to be sorted or processed to use.
  suffix: Full
  components:
  - type: GoblinPreciousTrash # Frontier
  - type: Stack
    stackType: ScrapOre
  - type: Sprite
    layers:
    - sprite: _NF/Objects/Materials/ore.rsi
      state: scrapore
  - type: Material
  - type: PhysicalComposition
    materialComposition:
      RawScrap: 100

# Ore vein
- type: ore
  id: NFOreScrap
  oreEntity: ScrapOre3
  minOreYield: 1
  maxOreYield: 5

# Stacks
- type: stack
  id: ScrapOre
  name: scrap ore
  icon: { sprite: /Textures/_NF/Objects/Materials/ore.rsi, state: scrapore }
  spawn: ScrapOre1
  maxCount: 100

- type: entity
  parent: ScrapOre
  id: ScrapOre1
  suffix: Single
  components:
  - type: Stack
    count: 1

- type: entity
  parent: ScrapOre
  id: ScrapOre3
  suffix: 3
  components:
  - type: Stack
    count: 3

- type: entity
  parent: ScrapOre
  id: ScrapOre20
  suffix: 20
  components:
  - type: Stack
    count: 20

- type: material
  id: RawScrap
  stackEntity: ScrapOre1
  name: materials-raw-scrap
  unit: materials-unit-chunk
  icon: { sprite: /Textures/_NF/Objects/Materials/ore.rsi, state: scrapore }
  color: "#FFD700"
  price: 0.02

# Spawner for lathe: yield random mats if processed in ore processor
- type: entity
  name: refined scrap
  id: SpawnRandomRefinedScrap
  parent: MarkerBasePlaceFree
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    layers:
      - state: green
      - sprite: _NF/Objects/Materials/ore.rsi
        state: scrapore
      - sprite: _NF/Markers/general.rsi
        state: questionmark
        color: red
  - type: RandomSpawner
    prototypes:
    - SpawnDungeonLootMaterialsBasicSingle
    - SpawnDungeonLootMaterialsBasicSingle
    - SpawnDungeonLootMaterialsBasicSingle
    - SpawnDungeonLootMaterialsBasicSingle
    - SpawnDungeonLootOresSingle
    - SpawnDungeonLootToolsBasicEngineering
    chance: 1.0
    offset: 0.0
    rarePrototypes:
    - MaterialBananium1
    - MaterialBones1
    - SpawnDungeonLootMaterialsValuableSingle
    - SpawnDungeonLootPartsEngi
    - SpawnDungeonLootCircuitBoard
    rareChance: 0.005

# Spawner for scrap processor: spawns random machine board, occasionally useful one

- type: entityTable
  id: TableScrapProcessorRandomBoard
  table: !type:GroupSelector
    children:
    # T1: Common machine boards (available from circuin imprinter or flatpack vendor)
    - !type:GroupSelector
      weight: 93
      children:
      - id: AutolatheMachineCircuitboard
      - id: CutterMachineCircuitboard
      - id: SpaceHeaterMachineCircuitBoard
      - id: PortableGeneratorJrPacmanMachineCircuitboard
      - id: PortableGeneratorPacmanMachineCircuitboard
      - id: CellRechargerCircuitboard
      - id: MiniGravityGeneratorCircuitboard
      - id: ThrusterMachineCircuitboard
      - id: ExosuitFabricatorMachineCircuitboard
      - id: UniformPrinterMachineCircuitboard
    # T2: specialised machine boards (techfabs)
    - !type:GroupSelector
      weight: 5.5
      children:
      - id: CircuitImprinterMachineCircuitboard
      - id: FlatpackerMachineCircuitboard
      - id: EngineeringTechFabCircuitboard
      - id: SalvageTechFabCircuitboardNF
      - id: ServiceTechFabCircuitboard
      - id: PortableGeneratorSuperPacmanMachineCircuitboard
      - id: OreProcessorMachineCircuitboard
      - id: MaterialReclaimerMachineCircuitboard
      - id: SpaceHeaterMachineCircuitBoard
      - id: ReagentGrinderMachineCircuitboard
    # T3: upgrade machine boards
    - !type:GroupSelector
      weight: 1
      children:
      - id: HellfireHeaterMachineCircuitBoard
      - id: HellfireFreezerMachineCircuitBoard
      - id: EmitterCircuitboard
      - id: CondenserMachineCircuitBoard
      - id: AutolatheHyperConvectionMachineCircuitboard
      - id: TurboItemRechargerCircuitboard
      - id: ShuttleGunKineticCircuitboard
      - id: OreProcessorIndustrialMachineCircuitboard
    # T4: core department tech boards
    - !type:GroupSelector
      weight: 0.5
      children:
      - id: ChemMasterMachineCircuitboard
      - id: ElectrolysisUnitMachineCircuitboard
      - id: StasisBedMachineCircuitboard
      - id: ResearchComputerCircuitboard
      - id: ResearchAndDevelopmentServerMachineCircuitboard

- type: entity
  id: ScrapProcessorRandomBoard
  parent: MarkerBasePlaceFree
  name: filter out functional machine boards
  components:
  - type: EntityTableSpawner
    offset: 0.0
    table: !type:NestedSelector
      tableId: TableScrapProcessorRandomBoard
      prob: 0.7
