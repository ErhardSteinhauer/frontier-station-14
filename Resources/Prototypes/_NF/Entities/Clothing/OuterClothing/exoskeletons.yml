# Note: Speed Boots [Tier 3 Civ-Service] PR - https://github.com/space-wizards/space-station-14/pull/21438
# Exoskeleton Base
- type: entity
  abstract: true
  parent: Clothing
  id: ClothingExoskeletonBase
  components:
  - type: Clothing
    slots:
    - outerClothing
  - type: ClothingSpeedModifier
    walkModifier: 1
    sprintModifier: 1
  - type: Item
    size: 120
  - type: Armor
    modifiers:
      coefficients:
        Blunt: 0.95
        Slash: 0.95
  - type: Storage
    capacity: 20
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
  - type: UserInterface
    interfaces:
    - key: enum.StorageUiKey.Key
      type: StorageBoundUserInterface
  - type: Sprite
    state: icon
  - type: MeleeWeapon
    hidden: true
    attackRate: 1
    damage:
      types:
        Blunt: 14
  - type: FootstepModifier
    footstepSoundCollection:
      path: Audio/_NF/Exoskeleton/sound_exoskeleton_servomotor_short.ogg
  - type: Tag
    tags:
    - Exoskeleton
  - type: StaticPrice
    price: 2500
#  - type: Prying #this is a bit awkward: you can pry open airlock while holding the suit in hand, but it doesn't do anything while you wear the suit

# Adding flashlight and battery to ClothingExoskeletonBase
- type: entity
  parent: ClothingExoskeletonBase
  id: ClothingExoskeletonLightBase
  noSpawn: true
  components:
  - type: Sprite
    layers:
    - state: icon
    - state: icon-flash
      visible: false
      map: [ "light" ]
  - type: Clothing
    equippedPrefix: off
  - type: ToggleableLightVisuals
  - type: PointLight
#    color: "#daffad"
    enabled: false
    radius: 3
    energy: 2
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
    netsync: false
  - type: Appearance
  - type: HandheldLight
    addPrefix: true
    blinkingBehaviourId: blinking
    radiatingBehaviourId: radiating
  - type: LightBehaviour
    behaviours:
      - !type:FadeBehaviour
        id: radiating
        interpolate: Linear
        maxDuration: 2.0
        startValue: 3.0
        endValue: 2.0
        isLooped: true
        reverseWhenFinished: true
      - !type:PulseBehaviour
        id: blinking
        interpolate: Nearest
        maxDuration: 1.0
        minValue: 0.1
        maxValue: 2.0
        isLooped: true
#  - type: Battery
#    maxCharge: 600 #lights drain 3/s but recharge of 3 makes this 0/s.
#    startingCharge: 600
#  - type: BatterySelfRecharger
#    autoRecharge: true
#    autoRechargeRate: 2 #Having recharge gives light an extended flicker period which gives you some warning to return to lit area.
  - type: PowerCellSlot
    cellSlotId: cell_slot
  - type: ContainerContainer
    containers:
      cell_slot: !type:ContainerSlot
  - type: ItemSlots
    slots:
      cell_slot:
        name: power-cell-slot-component-slot-name-default
        startingItem: PowerCellHigh

# Adding ToggleClothingSpeed to ClothingExoskeletonLightBase
- type: entity
  parent: ClothingExoskeletonLightBase
  id: ClothingExoskeletonLightToggleSpeed
  noSpawn: true
  description: A linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Magboots # Should be replaced later with 'ToggleClothingSpeed' once Speed Boots [Tier 3 Civ-Service] PR is merged 
    toggleAction: ActionToggleExoskeletonServomotors
  - type: ClothingSpeedModifier
    walkModifier: 0.85 # Should be replaced later with '1' once Speed Boots [Tier 3 Civ-Service] PR is merged 
    sprintModifier: 0.85 # Should be replaced later with '1' once Speed Boots [Tier 3 Civ-Service] PR is merged 
    enabled: false
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleVisuals.Toggled:
        enum.ToggleVisuals.Layer:
          True: { state: icon-servos-off } # Should be replaced later with 'icon-servos-on' once Speed Boots [Tier 3 Civ-Service] PR is merged 
          False: { state: icon-servos-on } # Should be replaced later with 'icon-servos-off' once Speed Boots [Tier 3 Civ-Service] PR is merged 
#  - type: PowerCellDraw # should uncomment once Speed Boots [Tier 3 Civ-Service] PR is merged 
#    drawRate: 4 # should uncomment once Speed Boots [Tier 3 Civ-Service] PR is merged 

# Action
- type: entity
  id: ActionBaseToggleExoskeletonServomotors
  name: Toggle Exoskeleton Servomotors
  description: Toggles the servomotors on and off.
  noSpawn: true
  components:
  - type: InstantAction
    itemIconStyle: NoItem
    event: !type:ToggleMagbootsEvent # Should be replaced later with '!type:ToggleClothingSpeedEvent' once Speed Boots [Tier 3 Civ-Service] PR is merged 

- type: entity
  id: ActionToggleExoskeletonServomotors
  parent: ActionBaseToggleExoskeletonServomotors
  noSpawn: true
  components:
  - type: InstantAction
    icon: { sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonengi.rsi, state: icon-servos-off }
    iconOn: { sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonengi.rsi, state: icon-servos-on }

# Adding armor for security exclusive variant of ClothingExoskeletonLightBase
- type: entity
  parent: ClothingExoskeletonLightToggleSpeed
  id: ClothingExoskeletonArmoredBase
  noSpawn: true
  components:
  - type: ClothingSpeedModifier
    walkModifier: 1
    sprintModifier: 1
  - type: Armor
    modifiers:
      coefficients:
        Blunt: 0.85
        Slash: 0.85
        Piercing: 0.95
#        Heat: 0.7
#        Caustic: 0.75
  - type: GroupExamine
#  - type: ExplosionResistance
#    damageCoefficient: 0.7
  - type: PointLight
#    color: "#FFC458"
    enabled: false
    radius: 8

#Departmental variations
#Engineer's Exoskeleton
- type: entity
  parent: ClothingExoskeletonLightToggleSpeed
  id: ClothingExoskeletonLightEngi
  name: engineer's exoskeleton
  description: A linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Sprite
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonengi.rsi
  - type: Clothing
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonengi.rsi

#Generic Exoskeleton
- type: entity
  parent: ClothingExoskeletonLightToggleSpeed
  id: ClothingExoskeletonLightGeneric
  name: exoskeleton
  description: A linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Sprite
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletongeneric.rsi
  - type: Clothing
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletongeneric.rsi

#Medic's Exoskeleton
- type: entity
  parent: ClothingExoskeletonLightToggleSpeed
  id: ClothingExoskeletonLightMedical
  name: medic's exoskeleton
  description: A linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Sprite
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonmedical.rsi
  - type: Clothing
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonmedical.rsi
#  - type: ClothingSpeedModifier
#    walkModifier: 1.05
#    sprintModifier: 1.05
  - type: PointLight
    enabled: false
    radius: 5

#Salvager's Exoskeleton
- type: entity
  parent: ClothingExoskeletonLightToggleSpeed
  id: ClothingExoskeletonLightSalvage
  name: salvage specialist's exoskeleton
  description: A linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Sprite
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonsalvage.rsi
  - type: Clothing
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonsalvage.rsi
  - type: PointLight
    enabled: false
#    color: "#00FF00"
    radius: 6
    netsync: false
  - type: Armor
    modifiers:
      coefficients:
        Blunt: 0.85
        Slash: 0.85
        Piercing: 0.90
        Caustic: 0.90

#Security's Exoskeleton
- type: entity
  parent: ClothingExoskeletonArmoredBase
  id: ClothingExoskeletonLightSecurity
  name: security issued exoskeleton
  description: An armored linear frame powered by servomotors. Protects your back and joints from straining.
  components:
  - type: Sprite
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonsecurity.rsi
  - type: Clothing
    sprite: _NF/Clothing/OuterClothing/Exoskeletons/exoskeletonsecurity.rsi
  - type: ShowSecurityIcons
