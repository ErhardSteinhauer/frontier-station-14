#region base
- type: entity
  abstract: true
  id: NFDestructibleItems
  components:
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak

#region Teapot
- type: entity
  id: DrinkTeapotEndless
  parent: [ DrinkTeapot, BaseC3WizardContraband ]
  name: the teapot of infinite tea
  description: An elegant teapot that quickly replenishes tea inside.
  components:
  - type: Sprite
    sprite: Objects/Consumable/Drinks/teapot.rsi # placeholder
  - type: SolutionContainerManager
    solutions:
      drink:
        maxVol: 100
        reagents:
        - ReagentId: Tea
          Quantity: 100
  - type: SolutionRegeneration
    solution: drink
    generated:
      reagents:
      - ReagentId: Tea
        Quantity: 5
  - type: SolutionPurge
    solution: drink
    preserve:
    - Tea
    quantity: 10

#region Wallet
- type: entity
  id: ClothingWalletInfiniteGreed
  parent: [ ClothingWalletLeatherBrown, BaseC3WizardContraband ]
  name: the wallet of boundless greed
  description: Surprisingly thick. Careful not to lose it, and don't sit on it.
  components:
  - type: Sprite
    sprite: _NF/Clothing/Wallet/leather.rsi
    layers:
    - state: closed-wizard
      map: ["closeLayer"]
    - state: open-wizard
      map: ["openLayer"]
      visible: false
    - state: closed-paper
      map: ["closed-paper"] # scuffed values to deal with ItemMapper complaining
      visible: false
    - state: closed-cash
      map: ["closed-cash"]
      visible: false
    - state: closed-coin
      map: ["closed-coin"]
      visible: false
    - state: wizard-unshaded
      shader: unshaded
  - type: Dumpable
  - type: MagnetPickup
    magnetEnabled: true

#region The Shaker
- type: entity
  id: DrinkShakerShaking
  parent: [ DrinkShaker, BaseC3WizardContraband ]
  name: The Shaker
  components:
  - type: Sprite
    sprite: Objects/Consumable/Drinks/shaker.rsi # placeholder
    state: icon
  - type: Item
    sprite: Objects/Consumable/Drinks/shaker.rsi # placeholder
  - type: Jittering
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
  - type: SpamEmitSound
    minInterval: 5
    maxInterval: 20
    sound:
      collection: MaleScreams
      params:
        variation: 0.125

#region Mop
- type: entity
  parent: [ MobCleanBot, BaseC3WizardContraband ]
  id: MobCleanBotWizard
  name: animated broom
  description: Magically animated broom with a simple goal in it's "not life" - cleaning.
  components:
  - type: NpcFactionMember
    factions:
    - NFSyndicate
  - type: Sprite
    sprite: _NF/Objects/Specific/Wizard/wizard_broom.rsi
    layers:
    - state: broom
    - state: broom-unshaded
      shader: unshaded
  - type: HTN
    rootTask:
      task: CleanbotCompound
  - type: NFSalvageMobRestrictions
    despawnIfOffLinkedGrid: false
    addComponentsOnDeath: []
    removeComponentsOnDeath: []
  - type: SoundWhileAlive
  - type: SpamEmitSound
    minInterval: 30
    maxInterval: 60
    sound:
      collection: MaleSigh
      params:
        variation: 0.2

#region Sandals
- type: entity
  id: ClothingShoesWizardMagboots
  parent: [ ClothingShoesBaseButcherable, BaseC3WizardContraband ]
  name: sandals with planewalker socks
  description: A pair of magic shoes.
  components:
  - type: Sprite
    sprite: Clothing/Shoes/Specific/wizard.rsi # placeholder
  - type: Clothing
    sprite: Clothing/Shoes/Specific/wizard.rsi # placeholder
  - type: ToggleClothing
    action: ActionToggleMagboots
    mustEquip: true
  - type: ComponentToggler
    components:
    - type: NoSlip
    - type: MovementIgnoreGravity
    - type: ProtectedFromStepTriggers
    - type: CanMoveInAir
  - type: Magboots
  - type: ClothingSpeedModifier
    walkModifier: 1.0
    sprintModifier: 1.0

#region Inf. canister
- type: entity
  parent: [ GasCanister, BaseC3WizardContraband ]
  id: WizardGasCanisterBottomless
  name: bottomless canister
  description: A canister that can hold more gas that it's size would suggest. Lovingly crafted for commercial use by the "Bottomless" brand.
  components:
    - type: Sprite
      sprite: _NF/Structures/Storage/canister.rsi # placeholder
      layers:
        - state: storage
    - type: GasCanister
      gasMixture:
        volume: 300000 # 1500[base canister volume] * 20
        moles: # List of gasses for easy reference
          - 0 # oxygen
          - 0 # nitrogen
          - 0 # CO2
          - 0 # Plasma
          - 0 # Tritium
          - 0 # Water vapor
          - 0 # Ammonia
          - 0 # N2O
          - 0 # Frezon
        temperature: 293.15
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 600
        behaviors:
          - !type:DoActsBehavior
            acts: [ "Destruction" ]
      - trigger:
          !type:DamageTrigger
          damage: 300
        behaviors:
        - !type:PlaySoundBehavior
          sound:
            collection: MetalBreak
        - !type:SpawnEntitiesBehavior
          spawn:
            StorageCanisterBroken:
              min: 1
              max: 1
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
        - !type:DumpCanisterBehavior

#region Inf. gas tank
- type: entity
  id: GasTankWizardBottomless
  parent: [ EmergencyOxygenTank, BaseC3WizardContraband ]
  name: bottomless gas tank
  description: An unusual looking gas tank that can hold more volume that it's size would suggest. Lovingly crafted for commercial use by the "Bottomless" brand.
  components:
  - type: Sprite
    sprite: Objects/Tanks/emergency_extended.rsi # placeholder
  - type: Item
    sprite: Objects/Tanks/emergency_extended.rsi # placeholder
  - type: GasTank
    air:
      volume: 9000
      temperature: 293.15
  - type: Clothing
    sprite: Objects/Tanks/emergency_extended.rsi # placeholder

#region Singing rock
- type: entity
  parent: [ BaseMachine, BaseC3WizardContraband ]
  id: SingingRock
  name: singing rock
  description: A rock with charming, melodic voice.
  components:
  - type: StationAiWhitelist
  - type: Sprite
    sprite: Objects/Decoration/Flora/flora_rockssolid.rsi
    layers:
    - state: rocksolid03
      map: ["enum.JukeboxVisualLayers.Base"]
  - type: Transform
    anchored: true
  - type: Jukebox
    onState: rocksolid03
    offState: rocksolid03
    selectState: rocksolid03
  - type: Appearance
  - type: ExtensionCableReceiver
  - type: ActivatableUI
    key: enum.JukeboxUiKey.Key
  - type: ActivatableUIRequiresPower
  - type: UserInterface
    interfaces:
        enum.JukeboxUiKey.Key:
          type: JukeboxBoundUserInterface
        enum.WiresUiKey.Key:
          type: WiresBoundUserInterface
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.25,-0.45,0.25,0.45"
        mask:
        - MachineMask
        layer:
        - MachineLayer
        density: 200

#region money tree
- type: entityTable
  id: TableTreeCoin
  table: !type:GroupSelector
    children:
    - id: TreasureCoinIron
      weight: 30
    - id: TreasureCoinIron3
      weight: 25
    - id: TreasureCoinSilver
      weight: 20
    - id: TreasureCoinSilver3
      weight: 5
    - id: TreasureCoinGold
      weight: 10
    - id: TreasureCoinGold3
      weight: 5
    - id: TreasureCoinAdamantine
      weight: 5

- type: entity
  parent: MarkerBasePlaceFree
  id: SpawnTreeCoin
  categories: [ HideSpawnMenu ]
  components:
  - type: EntityTableSpawner
    offset: 0.0
    table: !type:NestedSelector
      tableId: TableTreeCoin
      prob: 1.00

- type: entity
  parent: BaseStructureDynamic
  id: PottedPlantCoinTree
  name: potted coin tree
  description: Source of mad riches.
  components:
  - type: Sprite
    offset: "0.0,0.3"
    sprite: _NF/Objects/Specific/Wizard/coin_tree.rsi
    state: coin-tree
    noRot: true
  - type: Pullable
  - type: Anchorable
  - type: Transform
    anchored: true
    noRot: true
  - type: InteractionOutline
  - type: Physics
    bodyType: Dynamic
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.3
        density: 350
        layer:
        - TableLayer
  - type: Timer
  - type: TimedSpawner
    prototypes:
    - SpawnTreeCoin
    chance: 0.75
    intervalSeconds: 120
    minimumEntitiesSpawned: 1
    maximumEntitiesSpawned: 2

#region Jar of fairies
- type: entity
  parent: BaseItem
  id: JarOfAngryFairies
  name: jar of angry fairies
  description: Careful not to break it if you don't want to feel the wrath of those little cuties.
  components:
    - type: Sprite
      sprite: _NF/Objects/Specific/Hydroponics/bees.rsi
      state: seed
    - type: Damageable
      damageContainer: Inorganic
      damageModifierSet: Glass
    - type: Destructible
      thresholds:
      - trigger:
          !type:DamageTrigger
          damage: 3
        behaviors:
        - !type:PlaySoundBehavior
          sound:
            collection: GlassBreak
        - !type:SpawnEntitiesBehavior
          spawn:
            MobAngryBeeTimed:
              min: 1
              max: 1
          transferForensics: true
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - type: DamageOnLand
      ignoreResistances: true
      damage:
        types:
          Blunt: 3
    - type: DamageOtherOnHit
      damage:
        types:
          Blunt: 3

#region cloak of holding
- type: entity
  parent: [ ClothingNeckBase, BaseC3WizardContraband ]
  id: ClothingNeckCloakWizardHolding
  name: wizard's portal cloak of holding
  description: What happens when your wizardry instructor forbids portal conjuring, yet you do it anyway and attempt to conceal it under your cloak when they are back to check on you?
  components:
  - type: Sprite
    sprite: _NF/Clothing/Neck/Cloaks/wizard_cloak_holding.rsi
    layers:
      - state: icon
      - state: icon-unshaded
        shader: unshaded
  - type: Item
    sprite: _NF/Clothing/Neck/Cloaks/wizard_cloak_holding.rsi
  - type: Clothing
    sprite: _NF/Clothing/Neck/Cloaks/wizard_cloak_holding.rsi
    clothingVisuals:
      neck:
      - state: equipped-NECK
      - state: equipped-NECK-unshaded
        shader: unshaded
  - type: Storage
    grid:
    - 0,0,3,3
    - 5,0,7,2
    - 0,5,7,5
    - 6,4,7,5
    - 9,2,10,3
    - 9,5,9,5
    maxItemSize: Small
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
  - type: UserInterface
    interfaces:
      enum.StorageUiKey.Key:
        type: StorageBoundUserInterface

#region Sash of holding
- type: entity
  parent: ClothingBeltWizardBlue
  id: ClothingBeltWizardHolding
  name: wizard sash of holding
  description: A magical sash without visible pockets yet capable of storing items.
  components:
  - type: Sprite
    sprite: _NF/Clothing/Belt/wizard_sash.rsi
    layers:
      - state: icon-base-01
        color: "#3e2147"
  - type: Item
    inhandVisuals:
      left:
      - state: inhand-left-base-01
        color: "#3e2147"
      right:
      - state: inhand-right-base-01
        color: "#3e2147"
  - type: Clothing
    sprite: _NF/Clothing/Belt/wizard_sash.rsi
    clothingVisuals:
      belt:
      - state: equipped-belt-base-01
        color: "#3e2147"
  - type: Storage
    grid:
    - 0,0,0,3
    - 0,0,2,0
    - 0,3,2,3
    - 2,2,2,2
    - 4,1,4,3
    - 6,1,6,3
    - 5,2,5,2
    - 5,0,5,0
    - 9,2,9,3
    - 8,0,8,1
    - 10,0,10,1
    maxItemSize: Huge

#region Wings
- type: entity
  parent: [ BaseJetpack, BaseC3WizardContraband ]
  id: FairyDragonWings
  name: fairy dragon wings
  suffix: Filled
  description: A jetpack fashioned to look like fairy wings. They even make a faint buzzing sound when you fly. Too bad that vacuum doesn't transmit sounds.
  components:
  - type: Sprite
    sprite: _NF/Objects/Specific/Wizard/fairy_wings.rsi
  - type: Clothing
    sprite: _NF/Objects/Specific/Wizard/fairy_wings.rsi
    slots:
    - Back
    - Belt
    - suitStorage
  - type: Item
    sprite: _NF/Objects/Specific/Wizard/fairy_wings.rsi
  - type: Jetpack
    moleUsage: 0.00020
  - type: GasTank
    outputPressure: 21.3
    air:
      volume: 50
      temperature: 293.15
      moles:
        - 10.25689525 # oxygen
        - 10.25689525 # nitrogen

#region Ravenbar
- type: entity
  parent: [ BaseCrowbar, BaseC3WizardContraband ]
  id: NFRavenbar
  name: ravenbar
  description: CAAAW!
  components:
  - type: Sprite
    state: icon
  - type: Item
    storedSprite:
      sprite: _NF/Objects/Tools/crowbar.rsi # Frontier: _NF prefix
      state: storage
  - type: Prying
    speedModifier: 2
    pryPowered: !type:Bool
      true
    force: !type:Bool
      true
    useSound: /Audio/Items/jaws_pry.ogg

#region scarf of warmth
- type: entity
  parent: [ ClothingNeckScarfWizardPurple, BaseC3WizardContraband ]
  id: ClothingNeckScarfWizardWarmth
  name: wizard scarf of warmth
  description: You don't feel neither cold nor warm wearing it. Wonder if it keeps you safe from plasmafires?
  components:
  - type: Sprite
    layers:
      - state: icon
        color: "#4593a5"
      - state: icon-unshaded
        shader: unshaded
        color: "#A65746"
  - type: Item
    inhandVisuals:
      left:
      - state: inhand-left
        color: "#4593a5"
      - state: inhand-left-unshaded
        shader: unshaded
        color: "#A65746"
      right:
      - state: inhand-right
        color: "#4593a5"
      - state: inhand-right-unshaded
        shader: unshaded
        color: "#A65746"
  - type: Clothing
    clothingVisuals:
      neck:
      - state: equipped-NECK
        color: "#4593a5"
        map: [ "wizard_stole_base" ]
      - state: equipped-NECK-unshaded-01
        map: [ "wizard_stole_runes" ]
        shader: unshaded
        color: "#A65746"
  - type: TemperatureProtection
    heatingCoefficient: 0.005
    coolingCoefficient: 0.05
  - type: FireProtection
    reduction: 0.1
  - type: RandomSprite
    available:
      - wizard_stole_base:
          equipped-NECK: WizardMagicColorsPurple
        wizard_stole_runes:
          equipped-NECK-unshaded-01: WizardMagicColorsPurple
          equipped-NECK-unshaded-02: WizardMagicColorsPurple
          equipped-NECK-unshaded-03: WizardMagicColorsPurple

#region Infernal Core
- type: entity
  parent: [ BaseItem, BaseGenerator, BaseC3WizardContraband ]
  id: NFGeneratorWizardInfernalCore5kW
  name: infernal core
  suffix: 5kW, Anchored
  description: A small, intensely hot core of magical energy. There is an LV cable port there.
  components:
  - type: Sprite
    sprite: Structures/Specific/Anomalies/pyro_anom.rsi
    state: anom
    snapCardinals: true
  - type: AmbientSound
    range: 5
    volume: -5
    sound:
      path: /Audio/Ambience/Objects/engine_hum.ogg
  - type: PowerSupplier
    supplyRate: 6666
  - type: NodeContainer
    examinable: true
    nodes:
      output:
        !type:CableDeviceNode
        nodeGroupID: Apc
  - type: GeneratorExhaustGas
    gasType: Plasma
    moleRatio: 0.15

#region Flying broom
- type: entity
  parent: VehicleKeyHoverbikeNF
  id: NFVehicleKeyBroom
  name: flying broom keys
  description: Cute bibelot.
  components:
  - type: Sprite
    sprite: _NF/Objects/Vehicles/broom.rsi
    state: keys
  - type: Tag
    tags:
    - VehicleKey
    - FlyingBroomKeys

- type: Tag
  id: FlyingBroomKeys

- type: entity
  parent: [ NFVehicleHoverbikeKeys, BaseC3WizardContraband ]
  id: NFVehicleFlyingBroomWithKey
  name: flying broom
  suffix: With key
  description: A magically animated broom capable of flight.
  components:
  - type: Sprite
    sprite: _NF/Objects/Vehicles/broom.rsi
    layers:
    - state: hull
      map: [ "broom_wraps" ]
    - state: engine
      map: ["enum.VehicleVisualLayers.AutoAnimate"]
    - state: lights
      shader: unshaded
      visible: false
      map: [ "light" ]
    noRot: true
  - type: RandomSprite
    available:
    - broom_wraps:
        hull: Sixteen
  - type: Appearance
  - type: ToggleableVisuals
    spriteLayer: light
  - type: Vehicle
    renderOver: North, South
    northOffset: 0, 0
    southOffset: 0, 0
    eastOffset: 0, 0
    westOffset: 0, 0
  - type: ItemSlots
    slots:
      key_slot:
        name: vehicle-slot-component-slot-name-keys
        whitelist:
          requireAll: true
          tags:
          - VehicleKey
          - FlyingBroomKeys
        startingItem: NFVehicleKeyBroom
        priority: 1
        insertSound:
          path: /Audio/Effects/Vehicle/vehiclestartup.ogg
          params:
            volume: -5
  - type: PointLight
    enabled: false
    radius: 3.5
    softness: 2
    color: "#FFC458"
    mask: /Textures/Effects/LightMasks/cone.png
    netsync: false
    autoRot: true

#region wizard's luggage
- type: entity
  parent: BaseItem
  id: CrateWizardLuggageWhistle
  name: wizard's luggage whistle
  description: A whistle that summons a wizard's luggage when blown.
  components:
  - type: Item
    sprite: Objects/Fun/whistles.rsi
    size: Tiny
  - type: Sprite
    sprite: Objects/Fun/whistles.rsi
    state: trench
  - type: Clothing
    sprite: Objects/Fun/whistles.rsi
    equippedPrefix: trench
    quickEquip: false
    slots: neck
  - type: SpawnItemsOnUse
    items:
    - id: SpawnMobWizardLuggage
    sound:
      collection: TrenchWhistle

- type: entity
  parent: MarkerBasePlaceFree
  id: SpawnMobWizardLuggage
  categories: [ HideSpawnMenu ]
  name: spawn wizard's luggage
  suffix: AI
  components:
  - type: ConditionalSpawner
    prototypes:
    - MobWizardLuggage

- type: entity
  parent:
  - BaseC3WizardContraband
  - NFInflatableCrate
  - BaseMob
  - MobStaminaFodder
  - MobDamageable
  - MobCombat
  - NFMobAtmos
  - MobBloodstream
  - MobFlammable
  - MobEnhancedMovement
  - NFMobRoadkillable
  id: MobWizardLuggage
  categories: [ HideSpawnMenu ]
  name: wizard's luggage
  components:
  - type: NPCImprintingOnSpawnBehaviour
    whitelist:
      components:
      - HumanoidAppearance
  - type: HTN
    rootTask:
       task: NonCombatantFollowerCompound
    blackboard:
      NavClimb: !type:Bool
        false
      NavInteract: !type:Bool
        true
      NavPry: !type:Bool
        true
  - type: NpcFactionMember
    factions:
    - NanoTrasen
  - type: Icon
    sprite: Structures/Storage/Crates/generic.rsi
  - type: Sprite
    sprite: Structures/Storage/Crates/generic.rsi
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.40,-0.30,0.40,0.45"
        density: 350
        mask:
        - TableMask
        layer:
        - TableLayer
  - type: NPCRetaliation
    attackMemoryLength: 10
  - type: Buckle
  - type: StandingState
  - type: InputMover
  - type: MobMover
  - type: ZombieImmune
  - type: Hands
  - type: Puller
  - type: FTLKnockdownImmune
  - type: NameIdentifier
    group: GenericNumber
  - type: MovementSpeedModifier
    baseWalkSpeed: 2
    baseSprintSpeed: 2
  - type: MobThresholds
    thresholds:
      0: Alive
      80: Critical
      120: Dead
  - type: SlowOnDamage
    speedModifierThresholds:
      40: 0.7
      60: 0.5
  - type: Tag
    tags:
    - FootstepSound
    - DoorBumpOpener
    - CannotSuicide
  - type: EntityStorage
    capacity: 40
    closeSound:
      path: /Audio/Misc/zip.ogg
    openSound:
      path: /Audio/Misc/zip.ogg
  - type: Reflect
    reflects:
    - Energy
    reflectProb: 0.2
    spread: 90
  - type: RadiationBlockingContainer
    resistance: 2.5
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
