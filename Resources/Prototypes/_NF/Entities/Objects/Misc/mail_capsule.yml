- type: entity
  name: mail capsule
  suffix: Primed
  id: MailCapsulePrimed
  parent: BaseItem
  components:
  - type: Item
    size: 5
  - type: ThrowingAngle
    angle: 180
  - type: EmbeddableProjectile
    minimumSpeed: 1
    removalTime: 0.1
  - type: Tag
    tags:
    - MailCapsuleTag
  - type: Sprite
    sprite: _NF/Objects/Misc/mail_capsule.rsi
    layers:
      - state: icon-empty
  - type: ItemSlots
    slots:
      mail_slot:
        insertVerbText: Put in Mail
        ejectVerbText: Take out Mail
        name: Mail
        startingItem: null
        whitelist:
          tags:
          - Document
          - MailTag
        insertOnInteract: true
        priority: 1
  - type: ContainerContainer
    containers:
      storagebase: !type:Container
        ents: []
      mail_slot: !type:ContainerSlot {}
  - type: Appearance
  - type: ItemMapper
    mapLayers:
      icon-mail:
        whitelist:
          tags:
          - Document
          - MailTag
    sprite: _NF/Objects/Misc/mail_capsule.rsi
  - type: Dumpable
  - type: Damageable
    damageContainer: Inorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 20 #excess damage avoids cost of spawning entities.
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 10
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:EmptyAllContainersBehaviour
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: DamageOnLand
    damage:
      types:
        Blunt: 9.5

- type: entity
  name: mail capsule box
  parent: BoxCardboard
  id: BoxMailCapsulePrimed
  description: A box of primed mail capsules.
  components:
  - type: StorageFill
    contents:
      - id: MailCapsulePrimed
        amount: 6
  - type: Storage
    capacity: 30
    whitelist:
      tags:
        - MailCapsuleTag
  - type: Sprite
    layers:
      - state: box